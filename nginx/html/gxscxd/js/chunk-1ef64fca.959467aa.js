(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ef64fca"],{1855:function(e,t,i){},c943:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-share-manage"},[i("div",{staticClass:"header-option"},[i("div",{staticClass:"header-option--left"},[e.isShowBtn()?i("a-upload",{staticClass:"upload-file",attrs:{multiple:!0,showUploadList:!1,name:"multipartFiles",action:"/gxRelease/comFile/upload"},on:{change:e.fileUploadChange}},[i("a-button",{attrs:{size:"small"}},[i("a-icon",{attrs:{type:"upload"}}),e._v("文件上传")],1)],1):e._e(),i("a-button",{attrs:{size:"small",icon:"download"},on:{click:e.downloadMoreFile}},[e._v("批量下载")])],1),i("div",{staticClass:"header-option--right"},[i("a-input",{attrs:{placeholder:"输入文件名关键字检索",clearable:""},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}},[i("a-icon",{attrs:{slot:"addonAfter",type:"search"},on:{click:e.fileSearchOption},slot:"addonAfter"})],1)],1)]),i("div",{staticClass:"table-content"},[i("a-table",{staticClass:"file-table-list",attrs:{columns:e.fileInfo.columns,rowKey:"id",dataSource:e.fileInfo.data,pagination:e.setPagination(),loading:e.fileInfo.loading,rowSelection:e.fileTableSelection()},on:{change:e.fileTableChange},scopedSlots:e._u([{key:"action",fn:function(t){return i("span",{},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),e.downloadFile(t)}}},[e._v("下载")]),e.isShowBtn()?[i("a-divider",{attrs:{type:"vertical"}}),i("a",{staticStyle:{color:"red"},attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),e.deleteFileOption(t)}}},[e._v("删除")])]:e._e()],2)}}])})],1)])},a=[],o=(i("a9e3"),i("d3b7"),i("c1df")),l=i.n(o),s=i("ca00"),r=i("b775"),c={getFileList:"/comFile/findComFile",uploadFiles:"/comFile/upload",deleteFile:"/comFile/deleteFile",deleteMoreFile:"/comFile/deleteFileRang"};function d(e){return Object(r["b"])({url:c.getFileList,method:"post",data:e})}function f(e){return Object(r["b"])({url:c.deleteFile,method:"post",data:e})}var u={name:"file-share",data:function(){var e=function(e,t,i){return{children:l()(e).format("YYYY-MM-DD hh:mm:ss"),attrs:{}}},t=function(e,t,i){return{children:i+1,attrs:{}}},i=[{title:"序号",width:100,customRender:t,align:"center"},{title:"文件名",dataIndex:"originName",align:"left"},{title:"处理时间",dataIndex:"handleTime",width:200,align:"center",customRender:e},{title:"操作",key:"action",dataIndex:"",scopedSlots:{customRender:"action"},width:200,align:"center"}];return{fileInfo:{data:[],columns:i,selectedRows:[],loading:!1,pagination:{pageSizes:["10","20","50","100"],pageSize:20,current:1,total:0}},searchKeyword:""}},created:function(){this.initOption()},watch:{searchKeyword:function(e){e||this.getFileListInfo()}},methods:{initOption:function(){this.getFileListInfo()},fileSearchOption:function(){this.getFileListInfo()},fileUploadChange:function(e){if("done"===e.file.status){var t=e.file.response;200===Number(t.code)?this.getFileListInfo():this.$notification.error({message:"code："+t.code,description:t.message,duration:5})}},fileTableSelection:function(){var e=this;return{onChange:function(t,i){e.fileInfo.selectedRows=i}}},deleteFileOption:function(e){var t=this;this.$confirm({title:"警告",content:"确定要删除该文件？删除后无法恢复！",onOk:function(){var i={id:e.id};f(i).then((function(e){t.$message.success("删除文件成功！"),t.getFileListInfo()}))}})},fileTableChange:function(e,t,i){this.fileInfo.pagination.pageSize=e.pageSize,this.getFileListInfo()},setPagination:function(){var e=this.fileInfo.pagination;return e.total=e.total||0,{simple:!1,showSizeChanger:!0,current:e.current,total:e.total,pageSizeOptions:e.pageSizes,pageSize:e.pageSize,showTotal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.total;return"共"+t+"条数据"},onChange:function(t,i){e.current=t}}},downloadFile:function(e){Object(s["b"])(window.location.origin+e.url,e.originName)},downloadMoreFile:function(){var e=this.fileInfo.selectedRows;if(e.length){for(var t=[],i=[],n=0;n<e.length;n++)t.push(e[n].url),i.push(e[n].originName);Object(s["c"])({urls:t,realNames:i,zipName:"共享文件批量压缩下载"+(new Date).getTime()})}else this.$message.warning("请选中要下载的文件！")},listenEnterKeyup:function(){var e=this;document.onkeydown=function(t){13===window.event.keyCode&&e.searchKeyword&&e.getFileListInfo()}},isShowBtn:function(){var e=this.$store.getters.userInfo;return 1===Number(e.auth.principal.departLevel)&&"messenger"!==e.listRole[0].roleName},getFileListInfo:function(){var e=this,t=this.fileInfo;t.loading=!0;var i={currPage:t.pagination.current,pageSize:t.pagination.pageSize,data:{originName:this.searchKeyword,startDate:"",endDate:""}};d(i).then((function(t){e.fileInfo.data=t.data})).finally((function(){e.fileInfo.loading=!1}))}},mounted:function(){this.listenEnterKeyup()}},h=u,p=(i("cf8d"),i("2877")),g=Object(p["a"])(h,n,a,!1,null,"c52e456a",null);t["default"]=g.exports},cf8d:function(e,t,i){"use strict";var n=i("1855"),a=i.n(n);a.a}}]);